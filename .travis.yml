language: node_js
node_js: 7
script:
  - yarn run build
  - yarn run lint
  - yarn run flow -- check --show-all-errors
branches:
  only:
    - master
    - /^v[0-9]/
cache:
  yarn: true
env:
  global:
    # CHROME_CLIENT_ID
    - secure: dWfWrXUXIUrA/gsMFc9aG+Bfue1m7G/7K2rdg6TmNJtVtJHbBTTKgxeW95yWvzG+Mr+bjHcFvJym274Bl2HdT1w0j9YjzxtzsyL4j+6X2zeHMrGcG3xx+ApcdSDyFNo86kQk3RBs/jCvoDtVvPB5daXNCP9Y9DxX47L0KH0EsxE6Nx06VG5PdQj045U1Zvh6kgYFCFRFzTWRvYt7Tx+2a4DZkPoC3oC/6IWSRMfgpvITJaOdy0jsB2aQX6SFtfLuez2+BWlkhp1/am4gE6hP3mnrWH1gtoxtLvoaKoX9O3gsAq701pHZD1VrJ0rT3tpk71uwYYPgcTD1QgeK0oiFJnZKRxXvt4ppajot2Le8X2G/V/HK/ThXEGPXuAyq62h+3sBfnTZL/q4B6EUK5r9GH4+z7iZpV+jAEdl5xY+y3Cje6VKguho+rIO5kYC/8SMQqeO3RX9msxUPgVqteM/pUou5J8zBHwkpz12W+BkP+MKsY3RGl9/xNuMs+65Yj5zL3H4c5w4zJ3/47mJ54AZLNiyFU2i5E/oUfjTHiFXfOG72/rtI0cK5X7YjhM3sxUMdKISRnBOly5aapO+X06UUTGDxxRDgstJvEcKpjfjmV/RfR0onQ3w2mUV8KSb5ddzNIKclLLGa/mzBUE7XTDbeLxxku0rXuGFLpTxqAIxpS2E=
    # CHROME_CLIENT_SECRET
    - secure: iolBmFl5iZ0KXtd01A4a2q7IcnvKJBppQCqsHQBTZg7eOSF3aGUEBt1qjUE7TcOGxLw4FZQ3B0k6ak7CcUgzX8uW/psoOq+Ydxt9K+yRgspio/xkDiIptLRkU9n/iUIfRoqsmazz1R6e55qY+Q60P+kQZt+lDCXr2DrQxTsGU3idX8hs8FYxY0m6ghcNWPINkIZhQW+sQqWJ/sIyiXLKXsCJTqZBzxgRTB5M7tDpTXhmKHnrJXc3OiuMV03ktDjdN8LEvHh9viaq2egw3gUJjC2araYETiAJ4vGaagqgnhRNkJPCA/l1azGttvUB/SdKNeVbJastBKe+AMA1VdHxz4UGWMOf5qIyOknnqRxxD62pSGwTVjq0QqFPJRJmuVlBlhXikhJPJO6zhbqhTrNz7oL7QVXJrPSQ8jR/VDoINDMx0MrHH9+pVzEUbPXEDJ4Tu+sMDyAFjiDhbWH0icEAvIBKL8867YrmPfFMhDNRR9tv4wBRDh0UKmY/q5AkA+QL0ip6hBNARcUzrfdCMmoeRDN/4TQoJ6y83I3hccOcgcf7O1il6VYuN5yA3y3x1hUaLUm0NUvr/jCUZdjgtGwGdqq02s71BlchK4OC2tfVAgDLer/eHw4veOUzhMZJkbJ5yX+47tdeXE26p2B5xRZTwAUxHC66by4FHw6quLzkgbQ=
    # CHROME_REFRESH_TOKEN
    - secure: h6AhvZTcUi+bW883kBgRitMHlWHn4hi/RRaXChZsdw7WrF39mCTUNk5dGNYhC/xbElTrNikuNpNFggoUJz99DYROY1YB1YFeZo4AwboWcZptwQPuDtHRIMj7B/W55SEfMKn0UCYxwTsIh9NmoGPpRgdO51H5iyXGWLivAmJat+v4mk44K+1OMi774hVYAzh/GiN4QteTQX0rldRVjn1WxpND31XXF6v+xKkOdj0xlPYrYFQ6XBLDsO6pQ0ahZm1WuVPIkKTPKeABaKtZI0PBraklEYfOex+csPXZPvajq6rxXTi5mdp8O1krWdL63NEKrn+9bjZ39xBC7YGC6AYNs0dB2tKi8dniA8TmOuhnMJQARBBpI9/an6qewmjp9fmfCmg2DezeAxS3cSVRhddaN38ghPCxzM5/xaHD9p2IFGOUKuHg9eVcN1U7l0C6+sXMxbHKQ+pjxR4/2r9XPM88ikP0mnXETMohGBNuYuXP2MwMWGzOnNo+LFnxY5FBX6eL4QH72/eHE5HsWAFB7blCafmgwgKLIP8t91kmtLsFA8fZonBRk0dlyY/s0a0TwaH4e/e8r2XG1mFgBPVFxzkzwV8csL9+dj1xnwKvtf3bqJqd2GSJ3ZqKkwo34TpASKsN1dZweykfQg8aPEsmVKK8tyovcOJ1/cmxzF9AeixrkZs=
    # FIREFOX_ISSUER
    - secure: pg/AmeqtCxn41Qxn1l5exElegp1UJcKLh+jrhQkkg6cnG/vrTXTn86RJq2CsoPZDiLasRGuRNzW+AntYxkEWurA+zJjB7p3waiwb0E2GynnfjPXdDCYrSlBco/3L32+RH08kVUmF7r9LXfatNVLgvrNDeN2R522zSEoRCwPOM8MW1T8hEIKAISyOHNogRgqT6p82jRyuAma09jCmQXl8k+tsoAXDhat4Ebx2VZKyZ6IrR2LGuSOjK+YSATWW5aG3FgVdnq9wDFb7X+tNvdgrVL/H9AxX2g1i65T00/0sV0I5ZaxfRIjqavkawIHjsFo8t3XwVVxw3IxNC24kSS5m2nxDqrYZ0VBmq14jXtyYHeNYboblYEQMJ97teIc/7ZyYOpGdPZAHYiGnhZstacn+xLZy3sJP6+4SwZg1GPUo9G9pqYNzBcP3NNX5ylrTh+kOwH5bwNQP23aSrFrGYZT/DRyZDGDSnC3GdKLbCFo4Jf8vlijwpEKtgwsLHO8UJ/a+DmRyELUmM+FaxNH3Syh6MkeRHa0tMopqrXTJTVaOxNJzXmlJocWz6iCAc/obiV1KVdXEeprQJVn9tHkOauEmUYv39nv6A9J5X7KwhLQC/44+ad78F49fs3Qa4Gu+XQAOg9reF6wQP4U/XpXHUT29ZHEmxNbqBpfvGzQi3rXNTAg=
    # FIREFOX_SECRET
    - secure: nkbI9TQBl+1bNj1sPA52dJcif3fhnOrojauepvZiEBQNhzqY0ilOQnJrtoAKpUriwwmVi9bt61zLL2Gb5HX/+8SIEnag034SlqDZpLzrgWskjeTvFE5ME+TJ07Z82th25OAoMMEGdo2RTgb/4XbOLX+x3oPxxNWp8SBqlfwsDFo/iLVoJ0FlHfm1stzBjUbfIsLfOMFdGXO+Gx3BXf2x5Zs00vA+4PYEu5RqIDj+lRb+eBSgMFFxqgN7KGWplwj1EqBTOv59Ov3pJ/AINgCI+gyFrKVfr+Hx4EqzeifyPZemFg2+RD6YUWFLOoVVkgzZR0r2fEKuBKvjqBNlaA/sDruK0Kewqy95rIkQeDxweg3AQPvBvToWpVPRAgeDE+h99bMtWBzwoZ3F4Hdzf2gDNse5nKdlt9554rxQ3wUCKMHGpb9xcVuIuDevx1xqJ+OzjMA5rfN34IjDSpiV1p1ZRjchXpmg7mcCGLJmOJKEz3NPqq670kwvVXqrx+vRMppPfzFH5HOur+dToN9N31oDIdrmpMEbrdCagJSMPqKjcV901CnooWJYz8aWC7BcOyt8b778EdERZ0P+QigW+ggv+E2sx8Os5/rTc5kyEFzexJrK/BINBgRcTpprRNOAF+6xQQpv8wefJddUc7B24HrLtxhvSuYI0xQjIedSdnRFmxU=
deploy:
  - provider: script
    script: node deploy.js
    skip_cleanup: true
    on:
      tags: true
  - provider: releases
    api_key:
      secure: kBbj3H2bs80+g3GBhRrat/X1oE+Dg0avFB2IfecIZJWKjfQQEVedXuTD/2/K9xtnDAaWOdW56FPVKIEerJ2GWNMsrazIW1KD3pq7H14GnWLHKxNUk1OUdTjhHFs3Gyuxd2JK3JRo1zyYNi4zdhrYNOvLuiW/Wcy4rpxvnglgBnRBuX7AjQznd7W+u3bGczqlT5DjfA0Is7e1wWsEzHhsjs33RgIvD7KmsDrew5nzc8hGaS1X4b81bU4mSe6NIKstigqBgf9/zRJeN7XuuxOAYqzfeLG02RL+ucOffuflNkxR6ykvJeJvzVlLewzLI/KEZ9dhY0NakDhVOKXd9+JJvwLbdwgDErDXpxe174hjZd5axB2ba5fE1IDwqVTeUZF3YwhcyqpfjFslbn1RBPuXaV1Mb5Kf0Qo/cLKZ9G2hHUeaFdvoicZ1yZ/CNDqWJ+lb/dVVIvSyQfaQYOKuf0wbnm/i+9sO38OJ3WzyHbS74Q+Hfd+4O92w5gjztUOBfUGiMruV+9yIUtlhAFJYEvhaheOoV0UxVsFipqFHEbLoExHehu+edfyL5KfUFAo0sQnOKQPgAc2xRjLRz9ioZRA4yq3z3ZtycG2VaKXARtEWMaKb86w28I9liCsZp8cCV7nEKSpb5K3cWbtsrzMUOP6V80MUgchOlyP7Ey7JtTVMtb8=
    file: dist/BTD2X.zip
    skip_cleanup: true
    on:
      tags: true
